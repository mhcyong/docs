# 插件介绍

![TePay](/media/TePay.png)  

# 配置环境要求  

1、适用系统：Typecho 1.1 以上版本；  
2、适用PHP版本：PHP7.0-7.3；  
3、数据库：MySql 5.5 以上版本；  

# 效果演示 

## 一、PC端用户付款效果演示 
1、前端支持支付宝和微信付款，可自由选择；  
![微信收款](/media/tepay-front-11.png)
![支付宝收款](/media/tepay-front-12.png)  

2、选择付款方式后，点击付款，直接弹出二维码，手机端扫描付款；  
![弹出二维码](/media/tepay-front-2.png)  

3、点击二维码卡片外区域，可取消付款，如果是误点击，可重新选择付款；  
![取消付款](/media/tepay-front-3.png)  

4、二维码过期提醒；  
默认情况下，2分钟内未扫描将提示过期，可重新选择付款。

## 二、手机端用户付款效果演示  
1、选择微信收款，浏览器打开，可截屏二维码到微信相册扫码付款，微信内打开可直接付款；  
![手机端微信付款](/media/mobile-payjs-1.png)  
![手机端微信付款](/media/mobile-payjs-2.png)

2、选择支付宝付款，在二维码下方有个启动支付宝APP付款的按钮，也可以截图到支付宝相册扫码付款，付款成功后回到页面会显示付款成功。    
![手机端支付宝付款](/media/tepay-front-4.png)  


# 后台操作说明 

1、到插件后台启用插件，然后设置页面填写相关参数，尽量精简，设置非常简单；    
![启用插件](/media/tepay-front-5.png)   
![插件设置](/media/tepay-front-6.png)   
2、可选择将付款成功消息推动到个人微信，利用Server酱的接口，不设置就不推送；    
![消息推送](/media/tepay-front-7.png)  
3、到你当前主题的post.php页面添加相应代码，如果你设置了独立页面收款，那么就到page.php页面相应位置设置；   
4、使用支付宝收款的，请看官方网站的操作说明：https://pangsuan.com/p/typecho-alipay-f2f.html   
5、购买专业版用户，会拉你入群，有问题可以在群里交流；  
6、最后如果你暂时不用插件，要删除，请先禁用。  


# 常见问题

1、支付宝使用的是个人账户收款吗？收费吗？  
答：个人用户签约的是当面付的基础版，单笔限额1000元，单日限额50000元，商家用户不限制；开通免费，每笔成功交易手续费0.6%，支付宝官方收取；  

2、微信使用的什么收款？  
答：使用的 [payjs.cn](https://payjs.cn/ref/zgpnbd) ，单笔1000元，单日限额50000元，如果流水大可以申请提高。  



# 开发日志

2020-02-06：TePay-Pro 4.2.3 修改手机端微信付款方式，在微信内打开可直接付款，浏览器打开弹出二维码，可截屏到微信相册扫码付款。
2020-02-03：TePay-Pro 4.2.2 调整手机端的判断方式，手机端支付宝付款也把二维码显示出来，调整二维码过期时间为120秒。
2020-02-01：TePay-Pro 4.2.1 版本中在IE浏览器下付款成功不跳转的问题，修复后台调整价格后跳转出错的问题。
2020-02-01：按计划发布 TePay-Pro 4.2.1 版本，去掉之前版本的效果演示地址，增加费用记录和订单查询功能。
2020-01-07：发现iPad上不能唤醒支付宝app付款，更改iPad上的付款方式都为扫码付款。
2019-12-17：付款成功后付费阅读区域增加显示付款方式。
2019-12-12：针对专业版独立页面也增加了收款设置，故在数据表中增加一个字段来区分，同时更新版本号为TePay-Pro-3.1.0更新此版本的老用户要注意一下。
2019-12-11：移动端的个人收款之前因为一些原因只保留了支付宝唤醒APP付款，现在还是把微信二维码收款也加上吧。
2019-12-10：听取用户的意见，给独立页面也增加了收款功能，好的建议我都会考虑的，专业版用户放心吧~~
2019-12-07：完善管理后台更新文章付费，删除付费文章时的提醒通知。
2019-12-02: 为了方便删除不需要的付费设置，在编辑文章页面和付费文章管理页面都增加了删除付费设置的操作。
2019-11-29: 管理文章付费时，如果设置为免费，同时又不设置价格，就干脆从付费表中去掉此条记录（适用TePay-Pro-3.0.0以后的版本）。
2019-11-27: 为了保护我和专业版用户的利益，对少部分核心代码进行加密，不会影响二次修改，开发等等操作。
2019-11-25: 因支付宝当面付不播报，故采用Server酱来推送支付成功消息到微信；
2019-11-24: 更新TePay-Pro到3.0.0版本，去掉了一些不需要的功能，也听取了已购买专业版用户的意见，增加一些功能，比如订单标题可以单独修改。
2019-11-21: 在订单表中增加文章标题的字段，方便直接从数据表查看，也减轻了数据查询的压力。
2019-10-01：中间经历了很多，记不清了...
2019-04-19: 开发 TeePay 并开源发布。


# 感谢

1、感谢 [纸盒博客](https://zhebk.cn) 在TePay-Pro-4.2.1版本中提供的前端支持；  
2、感谢 [Server酱](https://sc.ftqq.com) 提供这么好的消息推动接口；  
3、感谢 [payjs.cn](https://payjs.cn/ref/zgpnbd) 提供的微信个人收款服务；  
4、感谢 [Typecho](https://typecho.org) 提供这么简单易用的开源程序。




